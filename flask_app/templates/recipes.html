<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
      crossorigin="anonymous"

    <title>Recipes</title>
</head>
<body>
    <h1>
        Welcome, {{session['first_name']}}
    </h1>
    <p>
        <a href="/recipe/new">
            Create 
        </a>
    </p>
    <p>
        <a href="/user/logout">
            Logout
        </a>
    </p>
    <div>
        All posted recipes:
    </div>
    <table>
        <tr>
            <th>
                Name 
            </th><!-- we need to loop through the recipes!!-->
            <th> 
                Under 
            </th>
            <th> 
                Posted By
            </th>
            <th> 
                Actions 
            </th>
        </tr>
        {% for recipe in list_recipes: %}
        <tr> 
            <td>
                {{recipe.name}}
            </td>
            <td>
                {% if recipe.under_30 == 1: %}
                    yes
                {% else: %}
                    No
                {% endif %}
            </td>
            <td>
                {{recipe.user.first_name}} {{recipe.user.last_name}}
            </td>
            <td>
                <a href="/recipes/{{recipe.id}}">
                    View recipe
                </a>
                {% if session['user_id'] == recipe.user.id : %}  
                <a href="/recipes/{{recipe.id}}/update" >
                    Edit
                </a>
                <a href="/recipes/{{recipe.id}}/delete">
                    Delete
                </a>
                {% endif %}
            </td>
        </tr>
        {% endfor %}
    </table>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa"
      crossorigin="anonymous"
    ></script>

</body>
</html>